(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b4f003cc"],{"0bb1":function(t,e,o){"use strict";var n=o("b27e"),i=o.n(n);e["default"]=i.a},"2c59":function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","id":"MCategoryList","type":"object","title":"配置分类条","description":"分别配置每个分类的名称以及图片链接，最多配置10组，最少配置3组","properties":{"imgList":{"type":"array","minItems":3,"maxItems":5,"items":{"type":"object","required":["name"],"properties":{"name":{"title":"配置类别名称","type":"string","default":"京东","ui:options":{"placeholder":"请输入类别名称"}},"img":{"type":"object","title":"配置图片和连接","required":["imgUrl","imgLink"],"ui:field":"LinkImgField","properties":{"imgUrl":{"type":"string","format":"uri","default":"https://gw.alicdn.com/tfs/TB1ISdWSFXXXXbFXXXXXXXXXXXX-146-147.png_110x10000.jpg_.webp","err:format":"请输入正确的的图片地址"},"imgLink":{"type":"string","format":"uri","default":"https://www.tmall.com","err:format":"请输入正确的的链接地址"}}}}}}},"additionalProperties":false}')},7087:function(t,e,o){"use strict";o.r(e);var n=function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],class:(t={},t[e.$style.previewBox]=e.isPreview,t)},[i("transition",{attrs:{name:"el-zoom-in-top"}},[e.isPreview?i("el-button",{staticStyle:{position:"fixed",right:"20px",top:"20px","z-index":"5"},attrs:{type:"primary"},on:{click:function(t){e.isPreview=!1}}},[e._v(" 结束预览 ")]):i("EditorHeader",{on:{onUpdateScale:e.fixComponentFormPosition,onPreview:function(t){(e.scale=100)&&(e.isPreview=!0)},onSave:e.handleSave,onPublish:e.handlePublish},model:{value:e.scale,callback:function(t){e.scale=t},expression:"scale"}})],1),i("div",{class:[e.$style.container,e.showToolBar?e.$style.hasTools:""]},[i("span",{class:e.$style.leftCaret,on:{click:function(t){e.showToolBar=!e.showToolBar}}},[i("i",{staticClass:"el-icon-caret-right"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showToolBar,expression:"showToolBar"}],class:e.$style.toolsBar},[i("EditorToolBar",{attrs:{"current-use-component-num":e.currentUseComponentNum,"drag-group":e.dragOptions.group,"config-tools":e.configTools},on:{onFilter:function(t){return e.$message.error("该组件添加数目已达上限！")}}})],1),i("div",{class:e.$style.contentWrap},[i("div",{class:[e.$style.contentBox]},[i("div",{ref:"domScrollWrap",class:e.$style.dragAreaWrap,style:{transform:"scale("+e.scale/100+")"}},[i("draggable",e._b({ref:"draggable",class:[e.$style.dragArea],on:{change:e.handleDragChange,start:e.handlerStart},model:{value:e.editComponentList,callback:function(t){e.editComponentList=t},expression:"editComponentList"}},"draggable",e.dragOptions,!1),e._l(e.trueComponentList,(function(t){var o;return i("div",{key:t.id,class:(o={draggableSlot:t.$$slot,draggableItem:!t.$$slot},o["draggableSlot_"+t.$$slot]=t.$$slot,o),attrs:{slot:t.$$slot||"default"},slot:t.$$slot||"default"},[i("ViewComponentWrap",{attrs:{"editor-item":t,"is-preview":e.isPreview},on:{onOperate:e.handleItemOperate}},[t.componentFormName?i(t.componentFormName,{tag:"component",attrs:{slot:"componentForm",value:t.componentValue},on:{"on-change":e.handleDataChange,"on-cancel":function(e){t.isEdit=!1},"on-submit":function(o){return e.handleSaveForm(o,t)}},slot:"componentForm"}):i("VueElementForm",{attrs:{slot:"componentForm",schema:t.componentPack.propsSchema,"ui-schema":t.componentPack.uiSchema,"error-schema":t.componentPack.errorSchema,"custom-rule":t.componentPack.customRule,value:t.componentValue},on:{"on-change":e.handleDataChange,"on-cancel":function(e){t.isEdit=!1},"on-submit":function(o){return e.handleSaveForm(o,t)}},slot:"componentForm"}),i(t.componentViewName,{tag:"component",attrs:{slot:"componentView","form-data":t.componentValue},slot:"componentView"})],1)],1)})),0),0===e.trueComponentList.length?i("div",{class:e.$style.tipBox},[i("img",{attrs:{src:o("f0f2"),alt:"empty-img"}}),i("p",[e._v("左边选择模块拖入该区域")])]):e._e()],1)])])])],1)},i=[],a=o("2e1d"),r=o("b0c0"),s=o("b822"),c=o("81e1"),m=o.n(c),l=o("31da"),p=o("655a"),d=o("2be67"),u=o("b8ca"),g=o.n(u),h=o("c145"),f=o("ea92"),w=o("11e2"),b=o("1aad"),v=o("a000"),X=o("896c"),j=o("bd6d"),x=o("7e2a"),_=o("f9ed"),L=o("262a"),y={imgList:{"ui:options":{title:"添加图片",description:"图片宽度750px，高度固定400px。<span>这里使用默认的field和校验提示</span>"},items:Object(d["a"])(Object(d["a"])({},Object(L["a"])({width:1920,height:500})),{},{imgLink:{"err:format":"请输入正确的的链接地址","err:required":"不能为空"},"ui:title":"轮播图片配置"})}},C=function(){return o.e("chunk-498609b7").then(o.bind(null,"3743"))},k={View:C,propsSchema:_,uiSchema:y},S=o("a623"),O={txt:{"ui:placeholder":"输入你的内容"},txtColor:{"ui:widget":"el-color-picker"}},$=function(){return o.e("chunk-52aa0afe").then(o.bind(null,"bc20"))},E={View:$,propsSchema:S,uiSchema:O},T=o("2c59"),B=function(){return o.e("chunk-bf69e030").then(o.bind(null,"cdb2"))},F={View:B,propsSchema:T},N=o("be36"),P=function(){return o.e("chunk-b0f28efc").then(o.bind(null,"ebbd"))},U={View:P,propsSchema:N},D=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-form",{ref:"form",attrs:{model:t.formData}},[o("el-form-item",{attrs:{label:"请配置标题"}},[o("el-input",{model:{value:t.formData.txt,callback:function(e){t.$set(t.formData,"txt",e)},expression:"formData.txt"}})],1),o("el-form-item",{staticStyle:{"text-align":"right"}},[o("el-button",{on:{click:function(e){return t.$emit("on-cancel")}}},[t._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(" 保存 ")])],1)],1)},V=[],M={name:"Form",props:{value:{type:Object,default:function(){return{}}}},data:function(){return{formData:this.$props.value?JSON.parse(JSON.stringify(this.$props.value)):{}}},watch:{formData:{deep:!0,handler:function(t){this.$emit("input",t),this.$emit("on-change",t)}}},methods:{onSubmit:function(){var t=this;return Object(l["a"])(m.a.mark((function e(){return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.form.validate();case 2:t.$emit("on-submit",t.formData);case 3:case"end":return e.stop()}}),e)})))()}}},I=M,J=o("2be6"),W=Object(J["a"])(I,D,V,!1,null,null,null),q=W.exports,A=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:t.$style.box},[o("h2",[t._v(" "+t._s(t.formData.txt||"请配置标题")+" ")])])},G=[],K={name:"TextView",props:{formData:{type:Object,default:function(){return{}}}}},z=K,H=o("a4c5");function Z(t){this["$style"]=H["default"].locals||H["default"]}var R=Object(J["a"])(z,A,G,!1,Z,null,null),Q=R.exports,Y={View:Q,Form:q,id:"MTestModule"},tt=[{groupName:"图文类",componentList:[{title:"轮播 (普通数组)",maxNum:2,viewWidth:"100%",icon:"el-icon-picture",componentPack:k},{title:"纯文本",maxNum:20,viewWidth:"100%",icon:"el-icon-notebook-1",componentPack:E},{title:"分类条",maxNum:5,viewWidth:"100%",icon:"el-icon-notebook-1",componentPack:F},{title:"推荐商品",maxNum:5,viewWidth:"100%",icon:"el-icon-notebook-1",componentPack:U},{title:"测试自定义form",maxNum:5,viewWidth:"100%",icon:"el-icon-notebook-1",componentPack:Y}]}],et=tt,ot=[{name:"MTestModule",value:{txt:"自定义Form表单测试"}},{name:"MCarouselImg",value:{imgList:[{imgUrl:"https://gw.alicdn.com/imgextra/i1/1734167/O1CN01eXdllZ1geX1zdbBLa_!!1734167-0-lubanu.jpg_790x10000Q75.jpg_.webp",imgLink:"https://www.jd.com"},{imgUrl:"https://img.alicdn.com/tps/i4///img.alicdn.com/tps/i4//TB1CDhKUvb2gK0jSZK9SuuEgFXa.jpg_790x10000Q75.jpg_.webp",imgLink:"https://www.jd.com"},{imgUrl:"https://gw.alicdn.com/imgextra/i1/1800474/O1CN01lXTksu1FN8MIE9JZb_!!1800474-0-lubanu.jpg_790x10000Q75.jpg_.webp",imgLink:"https://www.jd.com"},{imgUrl:"https://img.alicdn.com/tps/i4///img.alicdn.com/tps/i4//TB1CDhKUvb2gK0jSZK9SuuEgFXa.jpg_790x10000Q75.jpg_.webp",imgLink:"https://www.jd.com"}]}},{name:"MCategoryList",value:{imgList:[{img:{imgUrl:"https://gw.alicdn.com/tfs/TB1ISdWSFXXXXbFXXXXXXXXXXXX-146-147.png_110x10000.jpg_.webp",imgLink:"https://www.jd.com"},name:"苏宁"},{name:"天猫超市",img:{imgUrl:"https://gw.alicdn.com/tfs/TB1wSoFa5qAXuNjy1XdXXaYcVXa-196-196.png?avatar=1_110x10000.jpg_.webp",imgLink:"https://www.jd.com"}},{name:"天猫国际",img:{imgUrl:"https://gw.alicdn.com/tfs/TB1Jc0fSFXXXXXTapXXXXXXXXXX-146-147.png_110x10000.jpg_.webp",imgLink:"https://www.jd.com"}},{name:"聚划算",img:{imgUrl:"https://gw.alicdn.com/tfs/TB15lhOSFXXXXaKXpXXXXXXXXXX-147-147.png_110x10000.jpg_.webp",imgLink:"https://www.jd.com"}},{name:"分类",img:{imgUrl:"https://gw.alicdn.com/tfs/TB12CFXSFXXXXcpapXXXXXXXXXX-146-147.png_110x10000.jpg_.webp",imgLink:"https://www.jd.com"}}]}},{name:"MText",value:{txt:"推荐商品",txtColor:"#e46028"}},{name:"MRecommendGoods",value:{title:"推荐商品",imgList:[{imgUrl:"https://img.alicdn.com/bao/uploaded/i2/1714128138/O1CN017m1aWc29zFn8OMOqR_!!1714128138.jpg_400x400q60.jpg",imgLink:"https://www.jd.com"},{imgUrl:"https://img.alicdn.com/tfs/TB1JPXDXwoQMeJjy0FpXXcTxpXa-235-316.png_320x5000q100.jpg_.webp",imgLink:"https://www.jd.com"},{imgUrl:"https://gw.alicdn.com/bao/uploaded/i1/725677994/O1CN01n4SRoc28vIm75wP4r_!!0-item_pic.jpg",imgLink:"https://www.jd.com"},{imgUrl:"https://gw.alicdn.com/bao/uploaded/i4/725677994/O1CN01TMAv0N28vIm7J4L2b_!!0-item_pic.jpg",imgLink:"https://www.jd.com"}]}},{name:"MText",value:{txt:"抢购商品",txtColor:"#0A96ED"}},{name:"MRecommendGoods",value:{title:"抢购商品",imgList:[{imgUrl:"https://img.alicdn.com/bao/uploaded/i1/1714128138/O1CN01is1MtI29zFo5MCOY6_!!1714128138.jpg_400x400q60.jpg",imgLink:"https://www.jd.com"},{imgUrl:"https://img.alicdn.com/bao/uploaded/i3/1714128138/O1CN01KaaLO129zFnqp4CQf_!!1714128138.jpg_400x400q60.jpg",imgLink:"https://www.jd.com"},{imgUrl:"https://img.alicdn.com/bao/uploaded/i2/2616970884/O1CN01X6Be1z1IOukJ1YEzk_!!2616970884.jpg_400x400q60.jpg",imgLink:"https://www.jd.com"},{imgUrl:"https://img.alicdn.com/bao/uploaded/i3/2411055336/O1CN01wgTHNw1pHw1DLbLaE_!!2411055336.jpg_400x400q60.jpg",imgLink:"https://www.jd.com"}]}}],nt=o("6a97"),it=o("8e27"),at=(o("c8cf"),Object(nt["a"])(et)),rt={name:"Editor",components:Object(d["a"])(Object(d["a"])({},at),{},{VueElementForm:h["default"],Draggable:g.a,EditorToolBar:v["a"],EditorHeader:X["a"],ViewComponentWrap:j["a"]}),data:function(){return{loading:!1,isPreview:!1,configTools:et,scale:100,editComponentList:[],editHeaderComponentList:[],editFooterComponentList:[],showToolBar:!0}},computed:{dragOptions:function(){return{animation:300,group:"listComponentsGroup",disabled:this.isPreview,ghostClass:this.$style.ghost,filter:this.$style.disabled,draggable:".draggableItem",tag:"div",swapThreshold:.3}},componentListGroup:function(){return[this.editHeaderComponentList,this.editComponentList,this.editFooterComponentList]},trueComponentList:function(){var t;return(t=[]).concat.apply(t,Object(p["a"])(this.componentListGroup))},currentUseComponentNum:function(){return this.trueComponentList.reduce((function(t,e){return t[e.componentViewName]=t[e.componentViewName]?t[e.componentViewName]+1:1,t}),{})}},watch:{trueComponentList:function(){this.computedComponentToolBarStatus(),this.fixComponentFormPosition()}},mounted:function(){window.document.body.classList.add("page-decorate-design")},destroyed:function(){window.document.body.classList.remove("page-decorate-design")},created:function(){this.initEditorData()},methods:{validateDataList:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.trueComponentList.length<=0)return this.$message.warning("请先拖入需要配置的组件"),!1;if(!t)return!0;for(var e=0;e<this.trueComponentList.length;e+=1){var o=this.trueComponentList[e],n=!1;if(o.componentPack.propsSchema?n=!h["schemaValidate"].isValid(o.componentPack.propsSchema,o.componentValue):this.$message.warning("使用非schema生成表单 需要自行校验数据!"),n)return document.querySelectorAll(".js_viewComponentBox")[e].click(),this.$message.error("数据配置校验不通过，请检查!"),!1}return!0},initEditorData:function(){var t=this;return Object(l["a"])(m.a.mark((function e(){var o;return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=Object(x["a"])(et,ot),o.forEach((function(e){if(!e.componentPack)return console.warn("存在一条异常数据，请检查："),void console.log(o);var n=Object(it["a"])(e);t.editComponentList.push(n),n.additional&&t.additionalStrategy(n.additional,n)}));case 2:case"end":return e.stop()}}),e)})))()},handleSave:function(t){this.validateDataList(t)&&Object(w["a"])({VueComponent:b["a"],dialogProps:{title:"提交数据"},componentProps:{jsonString:Object(x["b"])(this.trueComponentList)}})},handlePublish:function(){this.handleSave(!0)},computedComponentToolBarStatus:function(){var t=this;this.componentListGroup.forEach((function(e){e.forEach((function(o,n){Object.assign(o.toolBar,{moveUpDisabled:0===n,moveDownDisabled:n===e.length-1,copyDisabled:(t.currentUseComponentNum[o.componentViewName]||0)>=o.maxNum,removeDisabled:o.additional&&o.additional.unRemove})}))}))},getCurrentListByItem:function(t){var e,o=Object(s["a"])(this.componentListGroup);try{for(o.s();!(e=o.n()).done;){var n=e.value;if(n.includes(t))return n}}catch(i){o.e(i)}finally{o.f()}return[]},fixComponentFormPosition:function(){var t=this;setTimeout((function(){var e=window.document.createEvent("UIEvents");e.initUIEvent("scroll",!0,!1,window,0),t.$refs.domScrollWrap.dispatchEvent(e)}),10)},handleDataChange:function(){this.fixComponentFormPosition()},handleItemOperate:function(t){var e=t.item,o=t.command,n={moveUp:function(t,e){return f["b"](t,e)},moveDown:function(t,e){return f["a"](t,e)},copy:function(t,e){e.componentValue;var o=Object(r["a"])(e,["componentValue"]);return t.splice(t.indexOf(e)+1,0,Object(it["a"])(o))},remove:function(t,e){return f["c"](t,e)}},i=n[o];i?i.apply(this,[this.getCurrentListByItem(e),e]):this.$message.error("系统错误 - 未知的操作：[".concat(o,"]"))},handleSaveForm:function(t,e){Object.assign(e,{componentValue:t,isEdit:!1})},moveToBothEnds:function(t,e){var o=this.editComponentList.indexOf(t);o>=0&&(0===e?this.editHeaderComponentList:this.editFooterComponentList).push(this.editComponentList.splice(o,1)[0])},additionalStrategy:function(t,e){var o=this,n={topDisplay:function(){e.$$slot="header",this.moveToBothEnds(e,0)},bottomDisplay:function(){e.$$slot="footer",this.moveToBothEnds(e,1)}};Object.entries(t).forEach((function(t){var e=Object(a["a"])(t,2),i=e[0],r=e[1];n[i]&&n[i].apply(o,[].concat(r))}))},handlerStart:function(t){},handleDragChange:function(t){t.added&&t.added.element.additional&&this.additionalStrategy(t.added.element.additional,t.added.element)}}},st=rt,ct=(o("dfd5"),o("0bb1"));function mt(t){this["$style"]=ct["default"].locals||ct["default"]}var lt=Object(J["a"])(st,n,i,!1,mt,null,null);e["default"]=lt.exports},"94cd":function(t,e,o){t.exports={box:"View_box_2ktKL"}},a4c5:function(t,e,o){"use strict";var n=o("94cd"),i=o.n(n);e["default"]=i.a},a623:function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","id":"MText","title":"单文本输入组件","description":"单文本输入组件，用于在页面配置一条文字信息","type":"object","required":["txt"],"properties":{"txt":{"title":"文字","type":"string"},"txtColor":{"title":"选择文字颜色","type":"string","default":"#ff0132"}}}')},b27e:function(t,e,o){t.exports={previewBox:"EditorM_previewBox_1e2un",toolsBar:"EditorM_toolsBar_2H-0J",leftCaret:"EditorM_leftCaret_2sCe6",container:"EditorM_container_1dAV0",dragAreaWrap:"EditorM_dragAreaWrap_25cwd",hasTools:"EditorM_hasTools_1ubYJ",contentWrap:"EditorM_contentWrap_1ZIlS",contentBox:"EditorM_contentBox_2vJ8i",tipBox:"EditorM_tipBox_3_h5V",dragArea:"EditorM_dragArea_3p-J5",ghost:"EditorM_ghost_YZdT_"}},be36:function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","id":"MRecommendGoods","type":"object","title":"配置分类条","description":"分别配置每个分类的名称以及图片链接，最多配置10组，最少配置3组","properties":{"title":{"title":"推荐名称","type":"string","default":"限时抢购","ui:options":{"placeholder":"请输入推荐名称"}},"imgList":{"type":"array","minItems":2,"maxItems":4,"items":{"type":"object","title":"配置图片和连接","required":["imgUrl","imgLink"],"ui:field":"LinkImgField","properties":{"imgUrl":{"type":"string","format":"uri","default":"https://img.alicdn.com/tfs/TB1vYlkdnZmx1VjSZFGXXax2XXa-468-644.jpg_320x5000q100.jpg_.webp","err:format":"请输入正确的的图片地址"},"imgLink":{"type":"string","format":"uri","default":"https://www.tmall.com","err:format":"请输入正确的的链接地址"}}}}},"additionalProperties":false}')},cbbf:function(t,e,o){},dfd5:function(t,e,o){"use strict";var n=o("cbbf"),i=o.n(n);i.a},f9ed:function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","id":"MCarouselImg","type":"object","properties":{"imgList":{"type":"array","minItems":1,"maxItems":4,"items":{"type":"object","properties":{"imgUrl":{"type":"string","format":"uri","default":"https://m.360buyimg.com/babel/jfs/t1/116779/33/13215/494116/5f19a54fE4e3bf7cc/8a2a7b0732385d19.jpg.webp"},"imgLink":{"type":"string","format":"uri","default":"https://www.google.com"}},"required":["imgUrl","imgLink"]}}},"additionalProperties":false}')}}]);